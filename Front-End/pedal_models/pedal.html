<!-- Defines element markup -->
<template>
	<style>

/* figure {
    border: thin #c0c0c0 solid;
    display: flex;
    flex-flow: column;
    padding: 5px;
    max-width: 220px;
    margin: auto;
}

img {
    max-width: 220px;
    max-height: 150px;
}

figcaption {
    background-color: #222;
    color: #fff;
    font: italic smaller sans-serif;
    padding: 3px;
    text-align: center;
    position: absolute;
    top: 50px;
    right: 40px;
} */

	</style>
    <!-- Include Editor style. -->
  <link href='https://cdn.jsdelivr.net/npm/froala-editor@3.0.5/css/froala_editor.pkgd.min.css' rel='stylesheet' type='text/css' />
  
	<div class="pedal draggable" id="pedal">
		<div id="resize"></div>

    
    
    <div class="container" id="txtcontainer">
      <img id="background-image">
      <div class="text-block" id="textB">
          <h4></h4>
          <p class="tititi" id="test"></p>
      </div>
    </div>
    <!-- <p id="labeldiv" style="border-style: dashed; top: 68px;">tototo</p> -->
    <!-- <figure>
        <img id="background-image" alt="tototo">
        <figcaption>tototo</figcaption>
    </figure> -->
    <!-- <div class="text-block" id="froala-editor"></div> -->
	</div>


</template>

<script src="pedalElementManager.js"></script>
<script src="pedal.js"></script>
<script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
<script type='text/javascript' src='https://cdn.jsdelivr.net/npm/froala-editor@3.0.5/js/froala_editor.pkgd.min.js'></script>

<script>
 /* new FroalaEditor('div#froala-editor', {
   editInPopup: true
 }) */


/* window.onmousemove = moveElem;
window.onmouseup = stopMovingElem;
window.onload = init;

var selected = null; // element to be moved
var oldMouseX, oldMouseY; // Stores x & y coordinates of the mouse pointer
var elemX, elemY;
var divs = [];
function init() {
    divs = pedal.shadowRoot.querySelectorAll('.draggable');
    divs.forEach(e => {
      e.onmousedown = function (evt) {
        dragInit(evt);
        //console.log('true');
    };
                      })
}
  
// Will be called when user starts dragging an element
function dragInit(evt) {
    // Store the elem
    selected = evt.target;
    elemX = selected.offsetLeft;
    elemY = selected.offsetTop;
  
    oldMouseX = evt.clientX;
    oldMouseY = evt.clientY;
}

// Will be called when user dragging an element
function moveElem(e) {
    // new mouse ps
    var newMouseX = e.clientX;
    var newMouseY = e.clientY;
  
    if(oldMouseX !== undefined) {
        // how many pixels did we move the mouse?
        var dx = newMouseX - oldMouseX;
        var dy = newMouseY - oldMouseY;
     }
    
    if (selected !== null) {  
        // move the selected element dx, dy pixels hozontally/vertically
        changePosOfSelectedElement(dx, dy);
    }
  
    // update the old position of the mouse
    oldMouseX = newMouseX;
    oldMouseY = newMouseY;
}

function changePosOfSelectedElement(dx, dy) {
  // update the old position of the selected element
  elemX += dx;
  elemY += dy;
  
  // change the pos on screen of the element
  // by modifying its CSS left/top properties
  selected.style.left = elemX + 'px';
  selected.style.top = elemY + 'px';
}

// Destroy the object when we are done
function stopMovingElem() {
    selected = null;
} */


const position = { x: 0, y: 0 }

interact('.draggable').draggable({
  ignoreFrom: 'webaudio-knob',
  listeners: {
    start (event) {
      console.log(event.type, event.target)
    },
    move (event) {
      position.x += event.dx
      position.y += event.dy

      event.target.style.transform =
        `translate(${position.x}px, ${position.y}px)`
    },
  }});
  
/* 
$('#pedal').resizable({
    helper: "ui-resizable-helper",
    grid: [10, 10]
});

$('#background-img').resizable({
    helper: "ui-resizable-helper",
    grid: [10, 10]
});
$('#textB').resizable({
    helper: "ui-resizable-helper",
    grid: [10, 10]
}); */
</script>
